<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Editar Solicitação - Martins Poços</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.2/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/lucide/0.263.1/umd/lucide.js"></script>
    <link rel="stylesheet" href="../../static/css/solicitar_servico.css" />
</head>
<body>
    <!-- Navbar -->
    <nav class="navbar navbar-expand-lg navbar-custom">
        <div class="container">
            <a class="navbar-brand text-white fw-bold" href="/">
                <i data-lucide="droplet" class="me-2"></i>
                Martins Poços
            </a>
            <div class="navbar-nav ms-auto">
                <a class="nav-link text-white" href="/dashboard/cliente">Dashboard</a>
                <a class="nav-link text-white" href="/logout">Sair</a>
            </div>
        </div>
    </nav>

    <div class="container mt-4">
        <div class="row justify-content-center">
            <div class="col-md-10">
                <div class="card">
                    <div class="card-header text-center">
                        <h3 class="mb-0">
                            <i data-lucide="edit" class="me-2"></i>
                            Editar Solicitação de Vistoria
                        </h3>
                        <p class="mb-0 mt-2 opacity-75">Atualize os dados da sua solicitação</p>
                    </div>
                    <div class="card-body p-4">
                        <form method="POST" id="serviceForm">
                            
                            <!-- Dados Pessoais -->
                            <div class="mb-4">
                                <h5 class="fw-bold mb-3 text-primary">
                                    <i data-lucide="user" class="me-2"></i>
                                    Dados Pessoais
                                </h5>
                                <div class="row">
                                    <div class="col-md-12 mb-3">
                                        <label for="full_name" class="form-label fw-bold">Nome Completo *</label>
                                        <input type="text" class="form-control" id="full_name" name="full_name" 
                                               value="{{.Service.FullName}}" required>
                                    </div>
                                </div>
                            </div>

                            <!-- Service Type Selection -->
                            <div class="mb-4">
                                <h5 class="fw-bold mb-3 text-primary">
                                    <i data-lucide="settings" class="me-2"></i>
                                    Tipo de Serviço *
                                </h5>
                                <div class="row g-3">
                                    <div class="col-md-4">
                                        <label class="service-option d-block {{if eq .Service.ServiceType "perfuracao"}}selected{{end}}" for="perfuracao">
                                            <input type="radio" name="service_type" value="perfuracao" id="perfuracao" 
                                                   {{if eq .Service.ServiceType "perfuracao"}}checked{{end}} required>
                                            <div class="text-center">
                                                <i data-lucide="construction" class="service-icon text-primary"></i>
                                                <h6 class="fw-bold">Perfuração de Poços</h6>
                                                <p class="text-muted small mb-0">Perfuração de poços artesianos</p>
                                            </div>
                                        </label>
                                    </div>
                                    <div class="col-md-4">
                                        <label class="service-option d-block {{if eq .Service.ServiceType "analise"}}selected{{end}}" for="analise">
                                            <input type="radio" name="service_type" value="analise" id="analise" 
                                                   {{if eq .Service.ServiceType "analise"}}checked{{end}} required>
                                            <div class="text-center">
                                                <i data-lucide="droplets" class="service-icon text-primary"></i>
                                                <h6 class="fw-bold">Análise da Água</h6>
                                                <p class="text-muted small mb-0">Análise de qualidade da água</p>
                                            </div>
                                        </label>
                                    </div>
                                    <div class="col-md-4">
                                        <label class="service-option d-block {{if eq .Service.ServiceType "manutencao"}}selected{{end}}" for="manutencao">
                                            <input type="radio" name="service_type" value="manutencao" id="manutencao" 
                                                   {{if eq .Service.ServiceType "manutencao"}}checked{{end}} required>
                                            <div class="text-center">
                                                <i data-lucide="wrench" class="service-icon text-primary"></i>
                                                <h6 class="fw-bold">Manutenção</h6>
                                                <p class="text-muted small mb-0">Manutenção de poços existentes</p>
                                            </div>
                                        </label>
                                    </div>
                                </div>
                            </div>

                            <!-- Endereço da Vistoria -->
                            <div class="mb-4">
                                <h5 class="fw-bold mb-3 text-primary">
                                    <i data-lucide="map-pin" class="me-2"></i>
                                    Local da Vistoria *
                                </h5>
                                <div class="row">
                                    <div class="col-md-4 mb-3">
                                        <label for="cep" class="form-label fw-bold">CEP *</label>
                                        <input type="text" class="form-control" id="cep" name="cep" 
                                               value="{{.Service.CEP}}" placeholder="00000-000" required>
                                    </div>
                                    <div class="col-md-8 mb-3">
                                        <label for="logradouro" class="form-label fw-bold">Logradouro *</label>
                                        <input type="text" class="form-control" id="logradouro" name="logradouro" 
                                               value="{{.Service.Logradouro}}" placeholder="Nome da rua, avenida..." required>
                                    </div>
                                    <div class="col-md-3 mb-3">
                                        <label for="numero" class="form-label fw-bold">Número *</label>
                                        <input type="text" class="form-control" id="numero" name="numero" 
                                               value="{{.Service.Numero}}" placeholder="123" required>
                                    </div>
                                    <div class="col-md-5 mb-3">
                                        <label for="bairro" class="form-label fw-bold">Bairro *</label>
                                        <input type="text" class="form-control" id="bairro" name="bairro" 
                                               value="{{.Service.Bairro}}" required>
                                    </div>
                                    <div class="col-md-4 mb-3">
                                        <label for="cidade" class="form-label fw-bold">Cidade *</label>
                                        <input type="text" class="form-control" id="cidade" name="cidade" 
                                               value="{{.Service.Cidade}}" required>
                                    </div>
                                    <div class="col-md-3 mb-3">
                                        <label for="estado" class="form-label fw-bold">Estado *</label>
                                        <select class="form-control" id="estado" name="estado" required>
                                            <option value="">Selecione</option>
                                            <option value="AC" {{if eq .Service.Estado "AC"}}selected{{end}}>AC</option>
                                            <option value="AL" {{if eq .Service.Estado "AL"}}selected{{end}}>AL</option>
                                            <option value="AP" {{if eq .Service.Estado "AP"}}selected{{end}}>AP</option>
                                            <option value="AM" {{if eq .Service.Estado "AM"}}selected{{end}}>AM</option>
                                            <option value="BA" {{if eq .Service.Estado "BA"}}selected{{end}}>BA</option>
                                            <option value="CE" {{if eq .Service.Estado "CE"}}selected{{end}}>CE</option>
                                            <option value="DF" {{if eq .Service.Estado "DF"}}selected{{end}}>DF</option>
                                            <option value="ES" {{if eq .Service.Estado "ES"}}selected{{end}}>ES</option>
                                            <option value="GO" {{if eq .Service.Estado "GO"}}selected{{end}}>GO</option>
                                            <option value="MA" {{if eq .Service.Estado "MA"}}selected{{end}}>MA</option>
                                            <option value="MT" {{if eq .Service.Estado "MT"}}selected{{end}}>MT</option>
                                            <option value="MS" {{if eq .Service.Estado "MS"}}selected{{end}}>MS</option>
                                            <option value="MG" {{if eq .Service.Estado "MG"}}selected{{end}}>MG</option>
                                            <option value="PA" {{if eq .Service.Estado "PA"}}selected{{end}}>PA</option>
                                            <option value="PB" {{if eq .Service.Estado "PB"}}selected{{end}}>PB</option>
                                            <option value="PR" {{if eq .Service.Estado "PR"}}selected{{end}}>PR</option>
                                            <option value="PE" {{if eq .Service.Estado "PE"}}selected{{end}}>PE</option>
                                            <option value="PI" {{if eq .Service.Estado "PI"}}selected{{end}}>PI</option>
                                            <option value="RJ" {{if eq .Service.Estado "RJ"}}selected{{end}}>RJ</option>
                                            <option value="RN" {{if eq .Service.Estado "RN"}}selected{{end}}>RN</option>
                                            <option value="RS" {{if eq .Service.Estado "RS"}}selected{{end}}>RS</option>
                                            <option value="RO" {{if eq .Service.Estado "RO"}}selected{{end}}>RO</option>
                                            <option value="RR" {{if eq .Service.Estado "RR"}}selected{{end}}>RR</option>
                                            <option value="SC" {{if eq .Service.Estado "SC"}}selected{{end}}>SC</option>
                                            <option value="SP" {{if eq .Service.Estado "SP"}}selected{{end}}>SP</option>
                                            <option value="SE" {{if eq .Service.Estado "SE"}}selected{{end}}>SE</option>
                                            <option value="TO" {{if eq .Service.Estado "TO"}}selected{{end}}>TO</option>
                                        </select>
                                    </div>
                                </div>
                            </div>

                            <!-- Agendamento -->
                            <div class="mb-4">
                                <h5 class="fw-bold mb-3 text-primary">
                                    <i data-lucide="calendar" class="me-2"></i>
                                    Agendamento Preferencial *
                                </h5>
                                <div class="row">
                                    <div class="col-md-6 mb-3">
                                        <label for="preferred_date" class="form-label fw-bold">Data Preferencial *</label>
                                        <input type="date" class="form-control" id="preferred_date" name="preferred_date" 
                                               value="{{.Service.PreferredDate.Format "2006-01-02"}}" required>
                                    </div>
                                    <div class="col-md-6 mb-3">
                                        <label for="preferred_time" class="form-label fw-bold">Horário Preferencial *</label>
                                        <select class="form-control" id="preferred_time" name="preferred_time" required>
                                            <option value="">Selecione o horário</option>
                                            <option value="08:00" {{if eq .Service.PreferredTime "08:00"}}selected{{end}}>08:00 - Manhã</option>
                                            <option value="09:00" {{if eq .Service.PreferredTime "09:00"}}selected{{end}}>09:00 - Manhã</option>
                                            <option value="10:00" {{if eq .Service.PreferredTime "10:00"}}selected{{end}}>10:00 - Manhã</option>
                                            <option value="11:00" {{if eq .Service.PreferredTime "11:00"}}selected{{end}}>11:00 - Manhã</option>
                                            <option value="13:00" {{if eq .Service.PreferredTime "13:00"}}selected{{end}}>13:00 - Tarde</option>
                                            <option value="14:00" {{if eq .Service.PreferredTime "14:00"}}selected{{end}}>14:00 - Tarde</option>
                                            <option value="15:00" {{if eq .Service.PreferredTime "15:00"}}selected{{end}}>15:00 - Tarde</option>
                                            <option value="16:00" {{if eq .Service.PreferredTime "16:00"}}selected{{end}}>16:00 - Tarde</option>
                                            <option value="17:00" {{if eq .Service.PreferredTime "17:00"}}selected{{end}}>17:00 - Tarde</option>
                                        </select>
                                    </div>
                                </div>
                            </div>

                            <!-- Description -->
                            <div class="mb-4">
                                <h5 class="fw-bold mb-3 text-primary">
                                    <i data-lucide="file-text" class="me-2"></i>
                                    Informações Adicionais
                                </h5>
                                <label for="description" class="form-label fw-bold">Observações</label>
                                <textarea 
                                    class="form-control" 
                                    id="description" 
                                    name="description" 
                                    rows="4" 
                                    placeholder="Descreva detalhes importantes sobre o local, urgência ou qualquer informação que possa ajudar nossa equipe..."
                                >{{.Service.Description}}</textarea>
                                <div class="form-text">Informações adicionais que possam ajudar no atendimento.</div>
                            </div>

                            <!-- Action Buttons -->
                            <div class="d-flex justify-content-between">
                                <a href="/dashboard/cliente" class="btn btn-outline-secondary">
                                    <i data-lucide="arrow-left" class="me-2"></i>
                                    Voltar ao Dashboard
                                </a>
                                <div>
                                    <a href="/solicitacao/{{.Service.ID}}" class="btn btn-outline-primary me-2">
                                        <i data-lucide="eye" class="me-2"></i>
                                        Ver Detalhes
                                    </a>
                                    <button type="submit" class="btn btn-primary-custom">
                                        <i data-lucide="save" class="me-2"></i>
                                        Salvar Alterações
                                    </button>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.2/js/bootstrap.bundle.min.js"></script>
    <script src="../static/js/editar_solicitacao.js"></script>
</body>
</html>